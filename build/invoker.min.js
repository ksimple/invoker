var invoke=function(){function a(){var a,b,c=!1,d=!1;this.done=function(e){if(d)throw new Error("Done can't be call twice.");d=!0,c?e(a):b=e},this.setResult=function(e){if(c)throw new Error("setResult can't be call twice.");d?(b&&b(e),c=!0):(a=e,c=!0)}}function b(d){function e(a){var b=/^\s*function.*?\((.*?)\)/.exec(a.toString());if(b){var c=b[1].replace(/\s*/g,"");return c.length>0?c.replace(/\s*/g,"").split(","):[]}return[]}function f(a,b,c,d,e,f){function h(e,g){function h(){c.apply(this,k)}k[e]=g,j++,j>=a.length&&(d?(h.prototype=c.prototype,f.setResult(new h)):f.setResult(c.apply(b,k)))}function i(a,b){return function(c){return a(b,c)}}if(0===a.length)f.setResult(c.apply(b,[]));else for(var j=0,k=[],l=0;l<a.length;l++){var m=a[l];g(m,e).done(i(h,l))}}function g(b,c){var e=i[b],f=new a;if("$invoke"==b)f.setResult(l);else if("undefined"==typeof e)d?d([b,function(a){return f.setResult(a)}]):f.setResult(void 0);else if("raw"===e.type)f.setResult(e.rawValue);else{if("factory"!==e.type)throw new Error("Not recongnized injection type.");if(e.isAsync&&!c)throw new Error("Resolve async dependency is not allowed.");k||(k=l.inherit()),k.inject("$done",function(a){return f.setResult(a)}),e.isAsync?k(e.factory):f.setResult(k(e.factory))}return f}function h(b,c){if(0!=b.length){var d=b.pop();"function"==typeof d&&0===b.length?b=e(d):"object"==typeof d&&d instanceof Array&&(b=d,d=b.pop());var g=new a;return f(b,this,d,!1,c,g),g}}"undefined"==typeof d&&(d=null);var i={},j={},k=null,l=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];var c;return h.call(this,a,!1).done(function(a){c=a}),c};return l.callAsync=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return h.call(this,a,!0)},l.createInstance=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];if(0!=b.length){b=Array.prototype.slice.apply(arguments);var d=b.pop();"function"==typeof d&&0===b.length?b=e(d):"object"==typeof d&&d instanceof Array&&(b=d,d=b.pop());var g,h=new a;return f(b,null,d,!0,!1,h),h.done(function(a){g=a}),g}},l.createInstanceAsync=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];if(0!=b.length){b=Array.prototype.slice.apply(arguments);var d=b.pop();"function"==typeof d&&0===b.length?b=e(d):"object"==typeof d&&d instanceof Array&&(b=d,d=b.pop());var g=new a;return f(b,null,d,!0,!0,g),g}},l.resolve=function(a){var b;return g(a,!1).done(function(a){b=a}),b},l.resolveAsync=function(a){return g(a,!0)},l.injectFactory=function(a,b){var c,d;"function"==typeof b?(c=e(b),c.push(b)):"object"==typeof b&&b instanceof Array&&(c=b),d=c.indexOf("$done")>0,i[a]={type:"factory",isAsync:c.indexOf("$done")>=0,factory:c}},l.inject=function(a,b){i[a]={type:"raw",rawValue:b}},l.clearInject=function(a){delete i[a]},l.config=function(a){for(var b in a)j[b]=a[b]},l.inherit=function(){var a=b(this);return a},l.clone=function(){var a=b(d);for(var c in i)"raw"===i[c].type?a.inject(i[c],i[c].rawValue):"factory"===i[c].type&&a.injectFactory(i[c],i[c].factory);return a.config(j),a},l.create=function(){var a=b();return a},l.id=c++,l}var c=0;return b()}();