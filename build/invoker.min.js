var invoke=function(){function a(){var a,b,c=!1,d=!1;this.done=function(e){if(d)throw new Error("Done can't be call twice");d=!0,c?e(a):b=e},this.setResult=function(e){if(c)throw new Error("setResult can't be call twice");d?(b&&b(e),c=!0):(a=e,c=!0)}}function b(d){function e(a){var b=/^\s*function.*?\((.*?)\)/.exec(a.toString());if(b){var c=b[1].replace(/\s*/g,"");return c.length>0?c.replace(/\s*/g,"").split(","):[]}return[]}function f(a,b,c,d,e){function f(f,g){function h(){c.apply(this,j)}j[f]=g,i++,i>=a.length&&(d?(h.prototype=c.prototype,e.setResult(new h)):e.setResult(c.apply(b,j)))}function h(a,b){return function(c){return a(b,c)}}if(0===a.length)e.setResult(c.apply(b,[]));else for(var i=0,j=[],k=0;k<a.length;k++){var l=a[k];g(l).done(h(f,k))}}function g(b){var c=i[b],e=new a;if("$invoke"==b)e.setResult(l);else if("undefined"==typeof c)d?d([b,function(a){return e.setResult(a)}]):e.setResult(void 0);else if("raw"===c.type)e.setResult(c.rawValue);else{if("factory"!==c.type)throw new Error("Not recongnized injection type");k||(k=l.inherit()),k.inject("$done",function(a){return e.setResult(a)}),c.isAsync?k(c.factory):k(c.factory).done(function(a){return e.setResult(a)})}return e}function h(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];if(0!=b.length){b=Array.prototype.slice.apply(arguments);var d=b.pop();"function"==typeof d&&0===b.length?b=e(d):"object"==typeof d&&d instanceof Array&&(b=d,d=b.pop());var g=new a;return f(b,null,d,!1,g),g}}"undefined"==typeof d&&(d=null);var i={},j={},k=null,l=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return h.apply(this,a)};return l.createInstance=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];if(0!=b.length){b=Array.prototype.slice.apply(arguments);var d=b.pop();"function"==typeof d&&0===b.length?b=e(d):"object"==typeof d&&d instanceof Array&&(b=d,d=b.pop());var g=new a;return f(b,null,d,!0,g),g}},l.resolve=function(a){return g(a)},l.get=function(a){var b,c=!1;if(g(a).done(function(a){b=a,c=!0}),!c)throw new Error("Can't get result of async injected");return b},l.withThis=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];if(0!=b.length){var d,g;if(1==b.length){if(!(b[0]instanceof Array))return;if(b=b[0],b.length<2)return;g=b.pop(),d=b.pop()}else{if(b=Array.prototype.slice.apply(arguments),b.length<2)return;g=b.pop(),d=b.pop(),0==b.length&&(b=e(g))}var h=new a;return f(b,d,g,!1,h),h}},l.injectFactory=function(a,b){var c,d;"function"==typeof b?(c=e(b),c.push(b)):"object"==typeof b&&b instanceof Array&&(c=b),d=c.indexOf("$done")>0,i[a]={type:"factory",isAsync:c.indexOf("$done")>=0,factory:c}},l.inject=function(a,b){i[a]={type:"raw",rawValue:b}},l.clearInject=function(a){delete i[a]},l.config=function(a){for(var b in a)j[b]=a[b]},l.inherit=function(){var a=b(this);return a},l.clone=function(){var a=b(d);for(var c in i)"raw"===i[c].type?a.inject(i[c],i[c].rawValue):"factory"===i[c].type&&a.injectFactory(i[c],i[c].factory);return a.config(j),a},l.create=function(){var a=b();return a},l.id=c++,l}var c=0;return b()}();