var invoke=function(){function a(){var a,b,c=!1,d=!1;this.done=function(e){if(d)throw"Done can't be call twice";d=!0,c?e(a):b=e},this.setResult=function(e){if(c)throw"setResult can't be call twice";d?(b&&b(e),c=!0):(a=e,c=!0)}}function b(d){function e(a){var b=/^\s*function.*?\((.*?)\)/.exec(a.toString());if(b){var c=b[1].replace(/\s*/g,"");return c.length>0?c.replace(/\s*/g,"").split(","):[]}return[]}function f(a,b,c){function d(d,e){h[d]=e,f++,f>=a.length&&(i?b.apply(null,h):c.setResult(b.apply(null,h)))}function e(a,b){return function(c){return a(b,c)}}if(0===a.length)c.setResult(b.apply(null,[]));else for(var f=0,h=[],i=!1,j=0;j<a.length;j++){var k=a[j];g(k).done(e(d,j))}}function g(b){var c=h[b],e=new a;if("$invoke"==b)e.setResult(k);else if("undefined"==typeof c)d?d([b,function(a){return e.setResult(a)}]):e.setResult(void 0);else if("raw"===c.type)e.setResult(c.rawValue);else{if("factory"!==c.type)throw"Not recongnized injection type";j||(j=k.inherit()),j.inject("$done",function(a){return e.setResult(a)}),c.isAsync?j(c.factory):j(c.factory).done(function(a){return e.setResult(a)})}return e}"undefined"==typeof d&&(d=null);var h={},i={},j=null,k=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];if(0!=b.length){b=Array.prototype.slice.apply(arguments);var d=b.pop();"function"==typeof d&&0===b.length?b=e(d):"object"==typeof d&&d instanceof Array&&(b=d,d=b.pop());var g=new a;return f(b,d,g),g}};return k.injectFactory=function(a,b){var c,d;"function"==typeof b?(c=e(b),c.push(b)):"object"==typeof b&&b instanceof Array&&(c=b),d=c.indexOf("$done")>0,h[a]={type:"factory",isAsync:c.indexOf("$done")>=0,factory:c}},k.inject=function(a,b){h[a]={type:"raw",rawValue:b}},k.clearInject=function(a){delete h[a]},k.config=function(a){for(var b in a)i[b]=a[b]},k.inherit=function(){var a=b(this);return a},k.clone=function(){var a=b(d);for(var c in h)"raw"===h[c].type?a.inject(h[c],h[c].rawValue):"factory"===h[c].type&&a.injectFactory(h[c],h[c].factory);return a.config(i),a},k.create=function(){var a=b();return a},k.id=c++,k}var c=0;return b()}();