"use strict";var invoke=function(){function a(){var a,b,c=!1,d=!1;this.done=function(e){if(d)throw new Error("Done can't be call twice.");d=!0,c?e(a):b=e},this.setResult=function(e){if(c)throw new Error("setResult can't be call twice.");d?(b&&b(e),c=!0):(a=e,c=!0)}}function b(d){function e(a){if(a.$inject&&a.$inject instanceof Array)return a.$inject.slice();if(a.$args&&a.$args instanceof Array)return a.$args.slice();var b=/^\s*function.*?\((.*?)\)/.exec(a.toString());if(b){var c=b[1].replace(/\s*/g,"");return c.length>0?c.replace(/\s*/g,"").split(","):[]}return[]}function f(a,b,c,d,e,f,h){var i,j=0,k=[];if(e&&(i=function(){b.apply(this,k)},i.prototype=b.prototype),0===c.length)e?h.setResult(new i):h.setResult(b.apply(a,k));else for(var l=function(d,f){k[d]=f,j++,j>=c.length&&(e?h.setResult(new i):h.setResult(b.apply(a,k)))},m=function(a,b){return function(c){return a(b,c)}},n=0;n<c.length;n++){var o=c[n];d&&d[o]?m(l,n)(d[o]):g(o,f).done(m(l,n))}}function g(b,c){var e=j[b],f=new a;if("$invoke"==b)f.setResult(m);else if("undefined"==typeof e)d?c?d.resolveAsync(b).done(function(a){return f.setResult(a)}):f.setResult(d.resolve(b)):f.setResult(void 0);else if("raw"===e.type)f.setResult(e.rawValue);else{if("factory"!==e.type)throw new Error("Not recongnized injection type.");if(e.isAsync&&!c)throw new Error("Resolve async dependency is not allowed.");l||(l=m.inherit()),l.inject("$done",function(a){return f.setResult(a)}),e.isAsync?l.callAsync(e.factory):f.setResult(l(e.factory))}return f}function h(a){var b,c;if(1!=a.length&&2!=a.length)throw new Error("Bad arguments format to invoke method");if(2==a.length&&(c=a.pop()),a[0]instanceof Array){if(a=a[0],0==a.length||"function"!=typeof a[a.length-1])throw new Error("Bad arguments format to invoke method");b=a.pop()}else"function"==typeof a[0]&&(b=a[0],a=e(b));return[b,a,c]}function i(b,c){var d,e,g=h(b);d=g[0],b=g[1],e=g[2];var i=new a;return f(this,d,b,e,!1,c,i),i}"undefined"==typeof d&&(d=null);var j={},k={},l=null,m=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];var c;return i.call(this,a,!1).done(function(a){c=a}),c};return m.callAsync=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return i.call(this,a,!0)},m.instantiate=m.createInstance=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];var d,e,g=h(b);d=g[0],b=g[1],e=g[2];var i,j=new a;return f(null,d,b,e,!0,!1,j),j.done(function(a){i=a}),i},m.createInstanceAsync=function(){for(var b=[],c=0;c<arguments.length-0;c++)b[c]=arguments[c+0];var d,e,g=h(b);d=g[0],b=g[1],e=g[2];var i=new a;return f(null,d,b,e,!0,!0,i),i},m.invoke=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];var c;a.length>1&&(c=a.splice(1,1)[0]),m.apply(c,a)},m.get=m.resolve=function(a){var b;return g(a,!1).done(function(a){b=a}),b},m.resolveAsync=function(a){return g(a,!0)},m.has=function(a){var b=!1;return g(a,!1).done(function(a){b=!0}),b},m.injectFactory=function(a,b){var c,d;"function"==typeof b?(c=e(b),c.push(b)):"object"==typeof b&&b instanceof Array&&(c=b),d="$done"==c[0],j[a]={type:"factory",isAsync:d,factory:c}},m.inject=function(a,b){j[a]={type:"raw",rawValue:b}},m.clearInject=function(a){delete j[a]},m.config=function(a){for(var b in a)k[b]=a[b]},m.inherit=function(){var a=b(this);return a},m.annotate=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];return h(a)[1]},m.clone=function(){var a=b(d);for(var c in j)"raw"===j[c].type?a.inject(j[c],j[c].rawValue):"factory"===j[c].type&&a.injectFactory(j[c],j[c].factory);return a.config(k),a},m.create=function(){var a=b();return a},m.id=c++,m}var c=0;return b()}();